{%- if request.page_type == 'product' and product.metafields.WNcjxM_canonical_app.canonical_url.value != blank -%}
    {%- assign new_canonical_url = product.metafields.WNcjxM_canonical_app.canonical_url.value -%}
{%- elsif request.page_type == 'collection' or request.page_type == 'list-collections' and collection.metafields.WNcjxM_canonical_app.canonical_url.value != blank -%}
    {%- assign new_canonical_url = collection.metafields.WNcjxM_canonical_app.canonical_url.value -%}
{%- elsif request.page_type == 'page' and page.metafields.WNcjxM_canonical_app.canonical_url.value != blank -%}
    {%- assign new_canonical_url = page.metafields.WNcjxM_canonical_app.canonical_url.canonical.value -%}
{%- elsif request.page_type == 'article' and article.metafields.WNcjxM_canonical_app.canonical_url.value != blank -%}
    {%- assign new_canonical_url = article.metafields.WNcjxM_canonical_app.canonical_url.value -%}
{%- elsif request.page_type == 'blog' and blog.metafields.WNcjxM_canonical_app.canonical_url.value != blank -%}
    {%- assign new_canonical_url = blog.metafields.WNcjxM_canonical_app.canonical_url.value -%}
{%- endif -%}
{%- if new_canonical_url != blank -%}
    {%- assign canonical_url = new_canonical_url -%}
{%- endif -%}